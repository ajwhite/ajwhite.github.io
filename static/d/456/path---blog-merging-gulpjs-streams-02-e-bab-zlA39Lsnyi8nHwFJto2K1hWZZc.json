{"data":{"markdownRemark":{"html":"<p>Sometimes when you're building out your GulpJS tasks, you need to create a stream against two different groups of files. In some of these cases, they should both end up in the same place. However, one group of files undergoes one build process, and other undergoes a separate build process.</p>\n<p>Let's take a look at an angular example using GulpJS for the following two build processes:</p>\n<ol>\n<li>Concatenating all of our Javascript files into one (<a href=\"https://www.npmjs.org/package/gulp-concat\" title=\"gulp-concat on npm\" target=\"_blank\">gulp-concat</a>)</li>\n<li>Transforming our HTML views into Javascript strings for $templateCache (html2js, or in this example <a title=\"gulp-angular-templatecache\" href=\"https://www.npmjs.org/package/gulp-angular-templatecache\" target=\"_blank\">gulp-angular-templatechace</a>)</li>\n</ol>\n<p>So we define the following two build tasks:</p>\n<p>{% highlight javascript %}\nvar gulp = require('gulp'),\nconcat = require('gulp-concat'),\ntemplateCache = require('gulp-angular-templatecache');</p>\n<p>gulp.task('compile', function () {\ngulp.src('src/scripts/*<em>/</em>.js')\n.pipe(concat('main.js'))\n.dest('dist/');\n});</p>\n<p>gulp.task('html2js', function () {\ngulp.src('src/views/*<em>/</em>.html')\n.pipe(templateCache({\nfilename: 'main.tpls.js'\n}))\n.dest('dist/');\n});</p>\n<p>gulp.task('build', ['compile', 'html2js']);\n{% endhighlight %}</p>\n<p>We can run each one, but they will produce two separate files -- <code class=\"language-text\">dist/main.js</code> and <code class=\"language-text\">dist/main.tpls.js</code>, where instead we'd prefer one. We could concatenate these files together, or have our concat task require the templateCache task and include that as the stream source, but neither of those are as clean as they could be. So what about creating two streams instead of two separate tasks? We could instead create these two streams and merge them together via <a title=\"event-stream\" href=\"https://www.npmjs.org/package/event-stream\" target=\"_blank\">event-stream</a>: </p>\n<ol>\n<li>Initialize a stream of our Javascript files</li>\n<li>Initialize a stream for our HTML files</li>\n<li>Compile our HTML into JS</li>\n<li>Merge the two stream with <code class=\"language-text\">event-stream</code></li>\n<li>Pipe into <code class=\"language-text\">gulp-concat</code></li>\n<li>And then finally pipe to our destination</li>\n</ol>\n<p>{% highlight javascript %}\nvar gulp = require('gulp'),\nconcat = require('gulp-concat'),\ntemplateCache = require('gulp-angular-templatecache'),\neventStream = require('event-stream');</p>\n<p>gulp.task('build', function () {\nvar javascriptStream = gulp.src('src/<strong>/*.js'),\nhtmlStream = gulp.src('src/</strong>/*.html');\nhtmlStream.pipe(templateCache());\neventStream.merge(javascriptStream, htmlStream)\n.pipe(concat('main.js'))\n.pipe(gulp.dest('dist'));\n});\n{% endhighlight %}</p>\n<p>Now we can take two different stream sources, process them through specific tasks, and have them result in the same output.</p>","frontmatter":{"date":"2014-09-20 00:25:00","permalink":"/blog/merging-gulpjs-streams","title":"Merging multiple GulpJS streams into one output file"}}},"pageContext":{}}